<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Electricidad âš¡</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
 	  margin: 0;
	  padding: 0;
 	  height: 100vh;
      background: url("HIAEP Ludovica SS.png") no-repeat center top;
 	  background-size: cover; /* mantiene proporciones exactas */
	  background-color: black;
	  font-family: Arial, sans-serif;
	  overflow: hidden;
	  position: relative;
    }

    /* ==== BOTONES ==== */
    button {
      position: absolute;
      right: 40px;
      width: 220px;
      padding: 12px;
      font-size: 16px;
      border: 2px solid black;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      color: black;
      background-color: #ccc;
      box-shadow: inset 0 0 8px rgba(0,0,0,0.3);
    }

    /* ðŸ”¹ Posiciones */
    #btn1 { top: 350px; }
    #btn2 { top: 400px; }
    #btn3 { top: 450px; }
    #btn4 { top: 500px; }
    #btn5 { top: 550px; }

    button:hover { transform: scale(1.05); }

    button:disabled {
      opacity: 0.7;
      filter: brightness(0.8);
    }

    /* ==== OBJETOS ==== */
    .objeto {
      position: absolute;
      width: 100px;
      filter: brightness(0.3);
      transition: all 0.4s ease;
    }

    .efectoBase { filter: brightness(1.3); }

    .amarillo { box-shadow: 0 0 25px 5px rgba(255, 255, 100, 0.8); }
    .rojo     { box-shadow: 0 0 25px 5px rgba(255, 50, 50, 0.8); }
    .azul     { box-shadow: 0 0 25px 5px rgba(50, 150, 255, 0.8); }
    .violeta  { box-shadow: 0 0 25px 5px rgba(180, 50, 255, 0.8); }

    /* ==== EFECTOS BOTONES ==== */
    .activo.amarillo {
      background-color: rgb(255, 255, 180);
      box-shadow: 0 0 15px 5px rgba(255, 255, 100, 0.8);
    }

    .activo.rojo {
      background-color: rgb(255, 120, 120);
      box-shadow: 0 0 15px 5px rgba(255, 50, 50, 0.8);
    }

    .activo.azul {
      background-color: rgb(150, 200, 255);
      box-shadow: 0 0 15px 5px rgba(50, 150, 255, 0.8);
    }

    .activo.violeta {
      background-color: rgb(220, 160, 255);
      box-shadow: 0 0 15px 5px rgba(180, 50, 255, 0.8);
    }

    /* ==== Oscurecer al presionar ==== */
    button:active {
      filter: brightness(0.6);
    }

/* ==== POSICIONES Y TAMAÃ‘OS OBJETOS (relativas) ==== */
#Interruptor_Celda { top: 25vh; left: 82.5vw; width: 6vw; height: auto; }
#Interruptor_Trafos { top: 27vh; left: 75vw; width: 5vw; height: auto; }
#Acople { top: 18vh; left: 43vw; width: 4vw; height: auto; }
#Acople_Barra { top: 87vh; left: 24vw; width: 4vw; height: auto; }

#Celda { top: 13vh; left: 82.5vw; width: 6vw; height: auto; }
#N1 { top: 27vh; left: 70vw; width: 5vw; height: auto; }
#N2 { top: 27vh; left: 65vw; width: 5vw; height: auto; }
#Trafo_1 { top: 12vh; left: 73vw; width: 6vw; height: auto; }
#Trafo_2 { top: 12vh; left: 67vw; width: 6vw; height: auto; }
#Tablero_FM { top: 11vh; left: 55vw; width: 5vw; height: auto; }
#Tablero_Emer { top: 19vh; left: 55vw; width: 5vw; height: auto; }
#FM { top: 11vh; left: 43vw; width: 4vw; height: auto; }
#Emergencia { top: 25vh; left: 43vw; width: 4vw; height: auto; }
#Tablero_Guardia { top: 76vh; left: 28vw; width: 4vw; height: auto; }
#Tablero_Quirofano { top: 84vh; left: 35vw; width: 5vw; height: auto; }
#FM_1 { top: 91vh; left: 48vw; width: 2vw; height: auto; }
#FM_2 { top: 91vh; left: 50.5vw; width: 2vw; height: auto; }
#FM_3 { top: 91vh; left: 53vw; width: 2vw; height: auto; }

#Grupos { top: 79vh; left: 6vw; width: 10vw; height: auto; }
#PLC { top: 86.5vh; left: 16.5vw; width: 7vw; height: auto; }
#E_1 { top: 91vh; left: 29vw; width: 2vw; height: auto; }
#E_2 { top: 93vh; left: 31.5vw; width: 1.5vw; height: auto; }
#E_3 { top: 91vh; left: 33.5vw; width: 2vw; height: auto; }
#Grupo_Guardia { top: 56vh; left: 5.5vw; width: 7vw; height: auto; }
#Grupo_Quirofano { top: 56vh; left: 14vw; width: 7vw; height: auto; }

  </style>
</head>
<body>
<!-- ==== CAPAS DE CABLES (SVG) ==== -->
<svg id="cables-rojos"  style="position:absolute; top:0; left:0; width:100%; height:100%; z-index:0; pointer-events:none;">
  <polyline id="cableRojo" points="" stroke="red" stroke-width="6" fill="none" stroke-linecap="round" stroke-linejoin="round" opacity="0.9"/>
</svg>

<svg id="cables-azules"  style="position:absolute; top:0; left:0; width:100%; height:100%; z-index:0; pointer-events:none;"></svg>
<svg id="cables-violetas" style="position:absolute; top:0; left:0; width:100%; height:100%; z-index:0; pointer-events:none;"></svg>

  <!-- ==== OBJETOS ==== -->
  <img id="Interruptor_Celda" class="objeto" src="interruptor.png">
  <img id="Interruptor_Trafos" class="objeto" src="interruptor.png">
  <img id="Acople" class="objeto" src="acople.png">
  <img id="Acople_Barra" class="objeto" src="acople de barra.png">
  
  <img id="Celda" class="objeto" src="celda.png">
  <img id="N1" class="objeto" src="1.png">
  <img id="N2" class="objeto" src="2.png">
  <img id="Trafo_1" class="objeto" src="transformador 1.png">
  <img id="Trafo_2" class="objeto" src="transformador 2.png">
  <img id="Tablero_FM" class="objeto" src="Fuerza motriz 1.png">
  <img id="Tablero_Emer" class="objeto" src="emergencia 1.png">
  <img id="FM" class="objeto" src="fuerza motriz 2.png">
  <img id="Emergencia" class="objeto" src="emergencia 2.png">
  <img id="Tablero_Guardia" class="objeto" src="tablero guardia.png">
  <img id="Tablero_Quirofano" class="objeto" src="tablero quirofano.png">
  <img id="FM_1" class="objeto" src="fm.png">
  <img id="FM_2" class="objeto" src="fm.png">
  <img id="FM_3" class="objeto" src="fm.png">

  <img id="Grupos" class="objeto" src="grupos.png">
  <img id="PLC" class="objeto" src="plc.png">
  <img id="E_1" class="objeto" src="e.png">
  <img id="E_2" class="objeto" src="e.png">
  <img id="E_3" class="objeto" src="e.png">
  <img id="Grupo_Guardia" class="objeto" src="grupo guardia.png">
  <img id="Grupo_Quirofano" class="objeto" src="grupo quirofano.png">

  <!-- ==== BOTONES ==== -->
  <button id="btn1">Funcionamiento Normal</button>
  <button id="btn2">Corte de Luz</button>
  <button id="btn3">Cables Rojos</button>
  <button id="btn4">Cables Azules</button>
  <button id="btn5">Cables Violetas</button>

<script>
// ==== CABLES CON WAYPOINTS ====
const waypointsRojo = [
  { top: 22, left: 85 },
  { top: 31, left: 85 },
  { top: 31, left: 77 }
];

function vh(v) { return (v / 100) * window.innerHeight; }
function vw(v) { return (v / 100) * window.innerWidth; }

function dibujarCableRojo() {
  const puntos = waypointsRojo.map(p => `${vw(p.left)},${vh(p.top)}`).join(" ");
  document.getElementById("cableRojo").setAttribute("points", puntos);
}

window.addEventListener("load", dibujarCableRojo);
window.addEventListener("resize", dibujarCableRojo);

// ==== GRUPOS Y COLORES ====
const grupos = {
  btn1: ['Celda', 'N1', 'N2', 'Trafo_1', 'Trafo_2', 'Tablero_FM', 'Tablero_Emer', 'FM', 'Emergencia',
  'Tablero_Guardia', 'Tablero_Quirofano', 'FM_1', 'FM_2', 'FM_3'],

  btn2: ['Grupos', 'PLC', 'E_1', 'E_2', 'E_3', 'Tablero_Quirofano', 'Tablero_Emer', 'Grupo_Quirofano',
  'FM_1', 'FM_2', 'FM_3', 'Tablero_FM', 'FM', 'Emergencia', 'Tablero_Guardia', 'Grupo_Guardia'],

  btn3: [],
  btn4: [],
  btn5: []
};

const colores = {
  btn1: 'amarillo',
  btn2: 'amarillo',
  btn3: 'rojo',
  btn4: 'azul',
  btn5: 'violeta'
};

const botones = Object.keys(grupos).map(id => document.getElementById(id));
let bloqueado = false;
let estados = { btn1: false, btn2: false, btn3: false, btn4: false, btn5: false };

// ==== FUNCIONES AUXILIARES ====
function esperar(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

function encender(idObj, color) {
  document.getElementById(idObj).classList.add('efectoBase', color);
}

function apagarGrupo(idBoton, rapido = false) {
  const delay = rapido ? 0 : 300;
  grupos[idBoton].forEach((idObj, i) => {
    setTimeout(() => document.getElementById(idObj).className = 'objeto', i * delay);
  });
  estados[idBoton] = false;
  document.getElementById(idBoton).className = '';
}

function bloquearBotones(tiempo) {
  bloqueado = true;
  botones.forEach(b => b.disabled = true);
  setTimeout(() => {
    bloqueado = false;
    botones.forEach(b => b.disabled = false);
  }, tiempo);
}

function encenderGrupo(idBoton) {
  const color = colores[idBoton];
  grupos[idBoton].forEach((idObj, i) => {
    setTimeout(() => encender(idObj, color), i * 300);
  });
  estados[idBoton] = true;
  document.getElementById(idBoton).classList.add('activo', color);
}

// ==== Inicializar botÃ³n 1 automÃ¡ticamente ====
window.onload = () => {
  encenderGrupo('btn1');
  Interruptor_Celda.style.filter = "brightness(0.8)";
  Interruptor_Celda.style.opacity = "1";
  Interruptor_Trafos.style.filter = "brightness(0.8)";
  Interruptor_Trafos.style.opacity = "1";
  Acople.style.filter = "brightness(0.8)";
  Acople.style.opacity = "1";
  Acople_Barra.style.filter = "brightness(0.8)";
  Acople_Barra.style.opacity = "1";
};

// ==== LÃ“GICA DE BOTONES ====
botones.forEach(boton => {
  boton.addEventListener('click', async () => {
    if (bloqueado) return;
    const id = boton.id;

    // === BOTÃ“N 1: Funcionamiento Normal ===
    if (id === 'btn1') {
      if (estados.btn2) {
        bloquearBotones(500);
        apagarGrupo('btn2', true);
        setTimeout(() => encenderGrupo('btn1'), 250);
      } else if (!estados.btn1) {
        bloquearBotones(500);
        encenderGrupo('btn1');
      } else {
        bloquearBotones(500);
        apagarGrupo('btn1');
      }
    }

    // === BOTÃ“N 2: Corte de Luz (Secuencia avanzada) ===
    else if (id === 'btn2') {
      const color = colores.btn2;
      bloquearBotones(10000); // evita spam mientras corre la secuencia

      if (estados.btn1) {
        apagarGrupo('btn1');
        await esperar(4200); // esperar apagado + retardo base
      }

      // ðŸŸ¢ Fase 0: Grupos y PLC
      ['Grupos', 'PLC'].forEach(idObj => encender(idObj, color));

      // ðŸ•“ Esperar 4 segundos
      await esperar(4000);

      // ðŸŸ¢ Fase 1: E_1, E_3, E_2, FM_1, FM_2, FM_3
      ['E_1', 'E_3', 'E_2', 'FM_1', 'FM_2', 'FM_3'].forEach(idObj => encender(idObj, color));

      // ðŸ•“ Esperar 0.5 segundo
      await esperar(500);

      // ðŸŸ¢ Fase 2: Tablero_Quirofano, Tablero_Emer, Tablero_FM, FM
      ['Tablero_Quirofano', 'Tablero_Emer', 'Tablero_FM', 'FM', 'Emergencia', 'Tablero_Guardia'].forEach(idObj => encender(idObj, color));

      // ðŸ•“ Esperar 0.5 segundo
      await esperar(500);

      // ðŸŸ¢ Fase 3: Emergencia, Tablero_Guardia, Grupo_Guardia
      ['Grupo_Quirofano', 'Grupo_Guardia'].forEach(idObj => encender(idObj, color));

      estados.btn2 = true;
      boton.classList.add('activo', color);
    }

    // === BOTONES 3, 4, 5 ===
    else {
      if (estados[id]) {
        bloquearBotones(100);
        apagarGrupo(id);
      } else {
        bloquearBotones(100);
        encenderGrupo(id);
      }
    }
  });
});
</script>
</body>
</html>
